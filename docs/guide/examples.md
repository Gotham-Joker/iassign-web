# 休假申请
下面是一个休假申请的案例，接下来介绍如何设计一个休假申请表，以及如何设计一个休假流程并绑定该申请表。

## 1. 设计“休假申请表”

最终的申请表效果图如下图所示。下面将会一步一步构造此表单。
![休假申请表](/images/example0.png)

1. 拖出一个“栅格布局”控件，设定"列间隔"为24。
![休假申请表2](/images/example2.png)
2. 再拖一个“选择框”控件到栅格布局中，设定字段为"type",控件标签为"假期类型"，然后开启必填项，“错误提示”写“必填项”。
在"选项"中，输入以下选项数据
```text
年假
病假
事假
产假
丧假
```
![休假申请表3](/images/example3.png)
3. 拖拽一个"数字"控件到栅格布局中，设定字段为"days"，控件标签为“休假天数”，最小值设定为0，开启必填项，错误提示写“必填项”。
![休假申请表4](/images/example4.png)
4. 同理，再拖两个日期控件到布局中，分别叫“开始日期”(字段startDate)和“结束日期”(字段endDate)，都开启必填项，错误提示均填写“必填项”。
得到如下图效果![休假申请表5](/images/example5.png)
5. 为了让用户能填写备注，我们拖拽一个文本域控件出来，字段填写"remark"，控件标签填写"备注"

6. 为了让用户能上传医生开具的病假证明等文件，我们拖拽一个“上传”控件进来，字段填“attachment”，标签填“附件”。
最终效果图如下![休假申请表1](/images/example1.png)

之后点击保存，填入表单名称和描述都填写“休假申请表”即可。

## 2. 设计“休假申请”流程

在流程设计器中，设计好如下图的流程图。
![流程图](/images/example6.png)
1. 在第一个“是”的条件中填入以下代码(代码的意思是：申请人是其所在部门的主管人员，流程才往这边走)
```java
INSTANCE.starter in bean('sysUserMapper').fromRoleId(INSTANCE.deptId + "MA01")
```
2. 在第二个“是”的条件中填入以下代码(代码的意思是：申请表中的days的数值若大于或等于3，流程将会往这边走)
```java
days>=3
```
3. “主管审批”环节，审批角色选择“{上一处理人主管}”和"{上一处理人副主管}"
4. “管理层审批”环节，审批角色固定选择“管理层”即可。

设计完成之后点击保存，输入“休假申请”作为流程的名称

## 3. 配置和部署流程
保存之后，用浏览器后退功能回到“流程管理”，点击查询，就能看到先前保存的流程定义。点击操作中的“配置”按钮，即可进入配置页面。
1. 在基本设置中，可以上传流程图的logo（可自行网上寻找logo），在“启动表单ID”中，填入我们在《设计“休假申请表”》章节中得到的表单ID，
序号填入0001（可随意填写任意序号），分组填入“人事部”，表示这是人事部的流程。最后点击保存即可配置好基本设置。
2. 在部署配置中，开启部署开关，并选择“全部”部门可见，点击保存，即可完成部署配置。

## 4. 发起流程
在系统菜单的“发起流程”中，可以看到刚刚部署的流程，点进去即可发起流程，填写好对应的申请表提交即可开始体验新流程。