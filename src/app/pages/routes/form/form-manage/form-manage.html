<nz-spin [nzSpinning]="loading">
    <nz-card class="card-shadow search-card">
        <div nz-form [nzLayout]="'inline'">
            <nz-form-item>
                <nz-form-label>表单名称</nz-form-label>
                <nz-form-control>
                    <input nz-input [(ngModel)]="queryParams.name_like">
                </nz-form-control>
            </nz-form-item>
            <nz-form-item>
                <button nz-button [nzType]="'primary'" (click)="query(1)">
                    <i nz-icon [nzType]="'search'"></i>查询
                </button>
            </nz-form-item>
            <nz-form-item>
                <button nz-button nzType="primary" routerLink="/form-designer">
                    <span nz-icon nzType="plus"></span>
                    添加表单
                </button>
            </nz-form-item>
            <ng-container *acl="'inForm'">
                <nz-form-item>
                    <nz-upload [nzBeforeUpload]="upload" [nzShowUploadList]="false"
                               [nzAccept]="['.json']">
                        <button nz-button>
                            <span nz-icon nzType="upload"></span>
                            导入
                        </button>
                    </nz-upload>
                </nz-form-item>
            </ng-container>
        </div>
    </nz-card>

    <br>

    <nz-card class="card-shadow">
        <nz-table #basicTable [nzData]="list" [nzFrontPagination]="false"
                  [nzTotal]="total"
                  [(nzPageIndex)]="queryParams.page"
                  [(nzPageSize)]="queryParams.size"
                  (nzPageIndexChange)="query($event)">
            <thead>
            <tr>
                <th>ID</th>
                <th>表单名称</th>
                <th>描述</th>
                <th>创建人</th>
                <th>修改人</th>
                <th>创建日期</th>
                <th>修改日期</th>
                <th>操作</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let item of basicTable.data">
                <td>{{item.id}}</td>
                <td>{{item.name}}</td>
                <td>{{item.description}}</td>
                <td>{{item.creator}}</td>
                <td>{{item.updater}}</td>
                <td>{{item.createTime}}</td>
                <td>{{item.updateTime}}</td>
                <td>
                    <a [routerLink]="'../form-preview'" [queryParams]="{id:item.id}">
                        <span nz-icon [nzType]="'eye'"></span> 预览</a>
                    <nz-divider [nzType]="'vertical'"></nz-divider>
                    <a [routerLink]="'/form-designer'" [queryParams]="{id:item.id}">
                        <span nz-icon [nzType]="'edit'"></span>
                        修改</a>
                    <ng-container *acl="'outForm'">
                        <nz-divider [nzType]="'vertical'"></nz-divider>
                        <a (click)="exportForm(item.id)"><span nz-icon nzType="download"></span> 导出</a>
                    </ng-container>
                    <nz-divider [nzType]="'vertical'"></nz-divider>
                    <a nz-popconfirm nzPopconfirmTitle="确定删除吗？"
                       (nzOnConfirm)="remove(item.id)"><span nz-icon [nzType]="'user-delete'"></span> 删除</a>
                </td>
            </tr>
            </tbody>
        </nz-table>
    </nz-card>
</nz-spin>
