<!--
  ~ MIT License
  ~
  ~ Copyright (c) 2024 Hongtao Liu
  ~
  ~ Permission is hereby granted, free of charge, to any person obtaining a copy
  ~ of this software and associated documentation files (the "Software"), to deal
  ~ in the Software without restriction, including without limitation the rights
  ~ to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  ~ copies of the Software, and to permit persons to whom the Software is
  ~ furnished to do so, subject to the following conditions:
  ~
  ~ The above copyright notice and this permission notice shall be included in all
  ~ copies or substantial portions of the Software.
  ~
  ~ THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  ~ IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  ~ FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  ~ AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  ~ LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  ~ OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
  ~ SOFTWARE.
  ~
  -->

<nz-sider nzCollapsible [(nzCollapsed)]="collapsed" [nzTrigger]="null" [nzCollapsedWidth]="64" nzTheme="light"
          class="app-sidebar">
    <div class="bg-white">
        <div class="nav-user">
            <div class="nav-avatar" (click)="toggleCollapsed()">
                <img [src]="userInfo.avatar" alt="">
            </div>
            <div class="nav-user-info">
                <strong>{{ userInfo.username }}</strong>
                <p class="mb-0 text-gray-700 text-ellipsis" nz-tooltip
                   [nzTooltipTitle]="userInfo.email">{{ userInfo.email }}</p>
            </div>
        </div>
        <div class="nav-line"></div>
        <!-- 菜单栏 -->
        <ul nz-menu nzTheme="light" nzMode="inline">
            @for (item of menus; let idx = $index; track idx) {
                <!-- 第一层是菜单组 -->
                <li nz-menu-group [nzTitle]="item.text"></li>
                <!-- 默认第一个菜单组的第一个子菜单是展开的 -->
                @for (subMenu of item.children; let subIdx = $index; track subIdx) {
                    <li nz-submenu
                        [nzOpen]="idx==0&&subIdx==0"
                        [nzTitle]="subMenu.text"
                        [nzIcon]="subMenu.icon">
                        <ul>
                            @for (subMenuItem of subMenu.children;track $index) {
                                <li nz-menu-item nzMatchRouter>
                                    <a [routerLink]="subMenuItem.link">{{ subMenuItem.text }}</a>
                                </li>
                            }
                        </ul>
                    </li>
                }
            }
            <!--<li nz-menu-group nzTitle="菜单"></li>
            <li nz-submenu nzTitle="仪表盘" nzIcon="_workbench_ao">
              <ul>
                <li nz-menu-item nzMatchRouter>
                  <a [routerLink]="['/layout/_workbench_ao']">仪表盘</a>
                </li>
                <li nz-menu-item nzMatchRouter>test
                  &lt;!&ndash;<a [routerLink]="['/layout/test']">test</a>&ndash;&gt;
                </li>
                <li nz-menu-item>Alex</li>
              </ul>
            </li>
            <li nz-submenu nzTitle="Team" nzIcon="team">
              <ul>
                <li nz-menu-item>Team 1</li>
                <li nz-menu-item>Team 2</li>
              </ul>
            </li>
            <li nz-menu-item>
              <span nz-icon nzType="file"></span>
              <span>File</span>
            </li>-->
        </ul>
    </div>
</nz-sider>
